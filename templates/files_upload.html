{% extends "template.html" %}

{% block content %}
    <div class="container-sm p-4" style=" background-color: rgb(248, 248, 248); max-width: 30rem">
        <h2 class="text-center">upload file</h2>
        <form action="/filesupload" method="post" enctype="multipart/form-data" id="form">
            <div class="custom-file">
                <input type="file" class="custom-file-input" id="customFile" name="file">
                <label class="custom-file-label" for="customFile">Choose file</label>
            </div>
            <input type="number" id="size" style="display: none" name="size">
            <div class="pb-4"></div>
            <button type="button" onclick="form_submit()" class="btn btn-primary btn-block">Submit</button>

            {% if error %}
                <div class="pb-4"></div>
                <div class="alert alert-danger" role="alert">
                    {{ error|safe }}
                </div>
            {% endif %}
        </form>
    </div>
    <script>
        // Add the following code if you want the name of the file appear on select
        $(".custom-file-input").on("change", function () {
            var fileName = $(this).val().split("\\").pop();
            $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
        });
        var file = document.getElementById("customFile")

        var size_field = document.getElementById("size")

        function form_submit() {
            var size = file.files[0].size
            console.log(size)
            size_field.setAttribute("value",size)
            $("#form").submit()
        }
    </script>

{% endblock %}